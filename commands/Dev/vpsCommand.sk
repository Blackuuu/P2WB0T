options:
	cmd: vps

on script load:
	set {command::{@cmd}::poziom} to 10
	set {command::{@cmd}::cooldown} to 0 seconds

	set {command::{@cmd}::opis} to "Wyświetla specyfikacjee maszyny"
	set {command::{@cmd}::kategoria} to "Deweloperskie"
	set {command::{@cmd}::uzycie} to "vps"

import:
	pl.kamil0024.aapanel.Main as Panel
	java.lang.String
	java.util.Date

discord command {@cmd} [<text>]:
	prefixes: "%{bot::prefix}%", "%{bot::helpmention}%" 
	trigger:
		send a "GET" request to "http://kamil0024.me:1234/api/supertajnytoken/vps/"
		map json body of last http response to {_r::*}
		
		set {_e} to a new embed
		create embed {_e}:
			set the colour of the embed to color of getColor(event-member)
			set the timestamp of embed to now
			set the footer of embed to footer with text "VPS" and no icon
		
			add split field named "Zużycie ramu" with value "%{_r::memTotal}%/%{_r::memRealUsed}% (Cache: %{_r::memCached}%)" to embed
			add split field named "Uptime" with value "%{_r::time}%" to embed
			add split field named "CPU" with value "%{_r::cpuRealUsed}%%% (%{_r::cpuNum}% Core)" to embed
			add split field named "OS" with value "%{_r::system}%" to embed
			add split field named "aaPanel" with value "v%{_r::version}%" to embed

		reply with {_e}
		KamilAPI add emote "green" to event-message of event-user

